<!doctype html>
<html lang="en">
    <head>
        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="description" content="">
        <meta name="keywords" content="">
        <meta name="author" content="Joel Peyton">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        <!-- Bootstrap CSS -->
        <link rel="stylesheet" href="../bootstrap/css/bootstrap.min.css">
        
        <!-- Font awesome -->
        <link rel="stylesheet" href="../fontawesome/css/all.css">

        <!-- Google Fonts-->
        <link href="https://fonts.googleapis.com/css2?family=Playfair+Display+SC&display=swap" rel="stylesheet">

        <!-- CSS -->
        <link rel="stylesheet" href="css/shop.css">
        <link rel="stylesheet" href="css/loader.css">
        
        <!-- Fav icons -->
        <link rel="apple-touch-icon" sizes="180x180" href="favicon/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="favicon/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="favicon/favicon-16x16.png">
        
        <link rel="manifest" href="site.webmanifest">

        <title>Pick and mix records</title>
    </head>
    <body class="bg">
        <!-- Loader -->
        <div class="loader">
            <span id="loader"><i class="fas fa-compact-disc"></i></span>
        </div>
        
        <div class="container">
            <!--  Cart display -->
            <div>
                <div id="cartTop" class="shopCart btn btn-danger"><i class="fas fa-shopping-cart"></i>&nbsp;Cart (&nbsp;<span id="cartBadge">0</span>&nbsp;)</div>
            </div>

            <!-- Title -->
            <h1><a href="index.html">PICK 'N' MIX RECORDS</a></h1>
            <hr>

            <!-- Nav bar -->
            <nav class="navbar navbar-expand-md navbar-light bg-transparent" style="margin:24px 0;">
                <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navb">
                <span class="navbar-toggler-icon"></span>
                </button>

                <div class="collapse navbar-collapse" id="navb">
                    <ul class="navbar-nav mr-auto" id="menuLinks">
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="javascript:void(0)" id="fixed" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Fixed price</a>
                            <div class="dropdown-menu" aria-labelledby="fixed">
                                <a class="dropdown-item" href="#" id="f1">50s & 60s singles (All £1.99)</a>
                                <a class="dropdown-item" href="#" id="f2">70s 80s & 90s singles (All £1.99)</a>
                                <a class="dropdown-item" href="#" id="f3">60s – 90s Bargain singles (All 99p)</a>
                                <a class="dropdown-item" href="#" id="f4">12” singles (All £2.49)</a>
                                <a class="dropdown-item" href="#" id="f5">LPs (£4.99)</a>
                            </div>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="javascript:void(0)" id="individual" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Individually priced</a>
                            <div class="dropdown-menu" aria-labelledby="individual">
                                <a class="dropdown-item" href="#" id="i1">7” singles</a>
                                <a class="dropdown-item" href="#" id="i2">12” singles</a>
                                <a class="dropdown-item" href="#" id="i3">LPs & CDs</a>
                            </div>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link disabled" href="javascript:void(0)" id="accessories">Accessories</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="javascript:void(0)" id="gifts">Gifts</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="javascript:void(0)" id="cart">Cart</a>
                        </li>
                    </ul>

                    <!-- Search -->
                    <div id="searchDiv" class="form-inline">
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <button type="button" class="btn btn-primary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    Search by &nbsp;<span class="sr-only">Toggle Dropdown</span>
                                </button>
                                <div class="dropdown-menu" id="searchBy">
                                    <button id="searchByArtist" class="dropdown-item">Artist</button>
                                    <button id="searchByTitle" class="dropdown-item">Title</button>
                                    <button id="searchByLabel" class="dropdown-item">Label</button>
                                    <button id="searchByJukebox" class="dropdown-item">Jukebox</button>
                                </div>
                            </div>
                            <input type="text" class="form-control" id="search" placeholder="Artist">
                        </div>
                    </div>
                </div>
            </nav>

            

            <!-- Records and Cart-->
            <div class="row">
                <div class="col-sm-12">
                    <!-- Records -->
                    <table id="recordsTable" class="table table-striped">
                        <thead>
                            <tr class="bg-secondary text-white">
                                <th colspan="7"><span id="categoryTitle"></span><span id="quantity"></span></th>
                            </tr>
                            <tr>
                                <th>Artist</th>
                                <th>Title</th>
                                <th>Condition</th>
                                <th>Price<strong>&nbsp;(£)</strong></th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        
                        <tbody id="records">
                            <!-- display records here-->
                        </tbody>

                        <!-- Load more -->
                        <tbody>
                            <tr id="finalRow">
                                <td colspan="5" style="text-align: center">
                                    <button class="btn btn-primary" id="more">Load more</button>
                                    <button class="btn btn-primary" id="backToTop">Back to top</button>
                                </td>
                            </tr>
                        </tbody>
            
                        <!-- Checkout -->
                        <tfoot id="checkout">
                            <tr>
                                <td></td>
                                <td></td>
                                <td><strong>Total</strong></td>
                                <td><span id="total"></span></td>
                                <td><button class="btn btn-primary" id="checkoutBtn" data-toggle="modal" data-target="#paypalModal">Checkout</button></td>
                            </tr>
                        </tfoot>
                    </table>
                </div>
            </div>

            <!-- Paypal Modal -->
            <div class="modal fade" id="paypalModal" tabindex="-1" aria-labelledby="paypalModal" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h4 class="modal-title" id="modalTitle">Confirm payment</h4>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <div class="form-group" id="inTheUK">
                                <label for="inTheUK">Are we delivering to the UK?</label>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="inTheUK" id="inUK" value="yes" checked>
                                    <label class="form-check-label" for="inUK">
                                        YES
                                    </label>
                                </div>
                                <div class="form-check mb-3">
                                    <input class="form-check-input" type="radio" name="inTheUK" id="notInUK" value="no">
                                    <label class="form-check-label" for="notInUK">
                                        NO
                                    </label>
                                </div>
                                <p id="overseas">Postage and packaging costs for overseas orders will be priced individually depending on country, weight and package size. These costs will be sent to you following your order.</p>
                            </div>
                            <div class="form-group mb-5" id="deliveryOptionContainer">
                                <label for="deliveryOption">Select delivery option</label>
                                <select class="custom-select" id="deliveryOption">
                                    <option value="1">Standard Delivery</option>
                                    <option value="2">Signed For</option>
                                    <option value="3">Guaranteed Next Day</option>
                                </select>
                            </div>
                    
                            <div id="paypalCheckout">
                                <table class="table">
                                    <tr>
                                        <td>Total</td>
                                        <td>£ <span class="float-right" id="paypalTotal"></span></td>
                                    </tr>
                                    <tr>
                                        <td>Shipping</td>
                                        <td>£ <span class="float-right" id="paypalShipping"></span></td>
                                    </tr>
                                    <tr>
                                        <td><strong>Grand total</strong></td>
                                        <td><strong>£ <span class="float-right" id="paypalGrand"></span></strong></td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <div id="paypal-button-container"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>


    
    <!-- Bootstrap JavaScript -->
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Bootstrap JS -->
    <script src="../jQuery/jquery-3.5.1.min.js"></script>
    <script src="../bootstrap/js/bootstrap.bundle.min.js"></script>
    
    <script src="js/shop.js" type="module"></script>
    <script src="js/search.js" type="module"></script>

    <script src="https://www.paypal.com/sdk/js?client-id=Ac811W6pLuye-D16yHXSVxFeCT6nOW3Q9ls4ei6AnVm4BLCDiQQ4runX_iMyc8c60lLvYacmaSumv32V&currency=GBP" data-sdk-integration-source="button-factory"></script>
    <script>
        paypal.Buttons({
                style: {
                    shape: 'rect',
                    color: 'blue',
                    layout: 'horizontal',
                    label: 'paypal',
                    tagline: false,
                    height: 40
            },
            createOrder: function(data, actions) {
                return actions.order.create({
                    purchase_units: [
                        {                
                            soft_descriptor: "Pick and Mix Records",
                            amount: {
                                currency_code: "GBP",
                                value: sessionStorage.grandTotal,
                                breakdown: {
                                    item_total: {
                                        currency_code: "GBP",
                                        value: sessionStorage.total
                                    },
                                    shipping: {
                                        currency_code: "GBP",
                                        value: sessionStorage.shipping
                                    }
                                }
                            },
                            items: JSON.parse(sessionStorage.items)
                        }
                    ]
                });
            },
            onApprove: function(data, actions) {
                return actions.order.capture().then(function(details) {
                    alert('Transaction completed by ' + details.payer.name.given_name + '!');
                });
            }
        }).render('#paypal-button-container');
    </script>
    
    </body>
</html>
